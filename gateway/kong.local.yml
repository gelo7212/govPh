_format_version: "3.0"

services:
  # =====================
  # BFF Citizen Service
  # =====================
  - name: bff-citizen
    url: http://govph-bff-citizen:3000
    routes:
      - name: identity-api
        paths:
          - /api/identity
        strip_path: false
      - name: sos-api
        paths:
          - /api/sos
        strip_path: false
      - name: geo-api
        paths:
          - /api/geo
        strip_path: false
      - name: messages-api
        paths:
          - /api/messages
        strip_path: false
      
      - name: incident-api
        paths:
          - /api/incidents
        strip_path: false


  # =====================
  # BFF Admin Service
  # =====================
  - name: bff-admin
    url: http://govph-bff-admin:3000
    routes:
      - name: admin-api
        paths:
          - /admin
        strip_path: false

plugins:
  - name: cors
    config:
      origins: ["*"]
      methods: ["GET","POST","PUT","PATCH","DELETE","OPTIONS"]
      headers: ["*"]
      exposed_headers: ["*"]
      credentials: false

  - name: rate-limiting
    config:
      minute: 10000
      policy: local
