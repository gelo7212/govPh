# Environment Configuration

## Local Development

```
MONGODB_URI=mongodb://localhost:27017/identity-service
PORT=3001
NODE_ENV=development
```

## Staging

```
MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/identity-service-staging
PORT=3001
NODE_ENV=staging
FIREBASE_PROJECT_ID=identity-service-staging
```

## Production

```
MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/identity-service-prod
PORT=3001
NODE_ENV=production
FIREBASE_PROJECT_ID=identity-service-prod
```

## Required Environment Variables

| Variable                     | Description                                          | Required |
| ---------------------------- | ---------------------------------------------------- | -------- |
| MONGODB_URI                  | MongoDB connection string                            | ✅       |
| JWT_ACCESS_SECRET            | Secret for signing access tokens (min 32 chars)     | ✅       |
| JWT_REFRESH_SECRET           | Secret for signing refresh tokens (min 32 chars)    | ✅       |
| PORT                         | Server port (default: 3001)                          | ❌       |
| NODE_ENV                     | Environment (dev/staging/prod)                       | ❌       |
| FIREBASE_PROJECT_ID          | Firebase project ID                                  | ⚠️       |
| TOKEN_REVOCATION_ENABLED     | Enable token revocation checks (default: true)      | ❌       |
| TOKEN_REVOCATION_CACHE_TTL   | Revocation cache TTL in seconds (default: 3600)     | ❌       |

## JWT Configuration

Generate secure secrets with:
```bash
openssl rand -base64 32
```

Example .env for local development:
```
MONGODB_URI=mongodb://localhost:27017/identity-service
JWT_ACCESS_SECRET=YourRandomBase64String1RandomBase64String1
JWT_REFRESH_SECRET=YourRandomBase64String2RandomBase64String2
PORT=3001
NODE_ENV=development
TOKEN_REVOCATION_ENABLED=true
TOKEN_REVOCATION_CACHE_TTL=3600
```

**Note**: Firebase integration is optional in development but required in production.
openssl genrsa 2048
openssl genrsa -out jwt-private.pem 2048
cat jwt-private.pem
openssl rsa -in jwt-private.pem -pubout